<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		
		<title> audio tag sample </title>
		
		<script src="http://code.jquery.com/jquery-latest.js"></script>
		
		
		<script>
		/*
		 * 단 아이폰에서는 사용자가 자동으로 연주를 할수가없다,
		 * 버튼 이벤트에서 play는 가능하지만 일정시간 경과후에 자동으로 연주하도록 타이머 이벤트로 연주로 시작하는것은 
		 * 아이폰에서는 불가능하다.
		 * 하지만 안드로이드나 일단 데스크탑에서는 잘된다.
		 */
			$(function() {
				
				
				var hID;
				
				$('button:eq(0)').on('click',function() {
					
					//console.log($('#bgm')[0].played);
					
					$('#bgm')[0].play();
					
					window.clearInterval(hID);
					hID = window.setInterval(function() {
						$('#duration').text($('#bgm')[0].currentTime + '/' + $('#bgm')[0].duration );
						
					},1000);
					
				});
				
				
				//html5 audio는 기본적으로 pause밖에 없다
				$('button:eq(1)').on('click',function() {
					$('#bgm')[0].pause();
					$('#bgm')[0].currentTime=0; //위치를 0으로 만듬으로써 정지 기능을 만든다.
					
				});
				
				//포즈 기능
				$('button:eq(2)').on('click',function() {
					$('#bgm')[0].pause();
					
				});
				
				
				
				
			});
		</script>
		
	</head>
	<body>
		
		<audio id='bgm' controls="controls">
			<source src="sounds/techno.wav" type="audio/mpeg" />
			Your browser does not support the audio element.
		</audio>
		
		<div>
			<button>play</button>
			<button>stop</button>
			<button>pause</button>
		</div>
		
		<p id='duration'></p>
		<p id='log'></p>
		
	</body>
</html>
