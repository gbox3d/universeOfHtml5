<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>index</title>
		<script src="http://code.jquery.com/jquery-latest.js"></script>
		<script>
		
			var TableName = 'BOOKMARK';
			
			
		////create
			function populate_success() {
				console.log('pop success');
			}
			function populateDB(tx) {
				tx.executeSql('DROP TABLE IF EXISTS '+ TableName );
				tx.executeSql(
					'CREATE TABLE IF NOT EXISTS ' + TableName + 
					'(id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT ,' +
					'data TEXT NOT NULL ' + 					
					');'
					);
			}
			
			
			//insert
			function insert_success() {
				console.log('insert success');
				//alert("success!");
			}
			function insertData(database,data) {
				database.transaction(
					function(tx) {
						tx.executeSql(
							'INSERT INTO '+ TableName + '(data) VALUES(?);',
							[data]
						);
					},
					errorCB,insert_success
				);
				
			}
			
			//select
            function select_success(tx, results) {
                var len = results.rows.length;
                console.log("table: " + len + " rows found.");
               
               for (var i=0; i<len; i++){
                    console.log("Row = " + i + " ID = " + results.rows.item(i).id + " Data =  " + results.rows.item(i).data);
                }
                
            }
            
			function selectList(database) {
				database.transaction(
					function(tx) {
						tx.executeSql(
							'SELECT * FROM '+ TableName,
							[],
							select_success,
							errorCB
						);
					}
				);
				
			}

			function errorCB(err) {
				console.log("Error processing SQL: " + err.code);
			}

			
			
			var db;
			
			function main() {
				var db = window.openDatabase("Database", "1.0", "Demo", 200000);
				db.transaction(populateDB, errorCB, populate_success);
				$('#insert').click(
					function() {
						insertData( db,   $('input').val());
						 $('input').val('');
					}
				);
				$('#list').click(
					function() {
						selectList(db);
					}
				);
			}


			$(document).ready(main);

		</script>
	</head>
	<body>
		<input type="text" /><button id='insert'>ins</button><br />
		<button id='list'>list</button>
	</body>
</html>
