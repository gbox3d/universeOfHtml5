<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script src="../libs/async.js"></script>

    <script>

        /*
         패러럴은 인자로 주어진 함수들이 동시에 실행되며 모두 끝날때 콜백이 일어난다.
         */

        async.waterfall([
            function(callback){
                setTimeout(function(){
                    callback(null, //에러 객체 ,없으면 null
                            'one',//그다음 폭포로넘겨줄 인자
                            'two');
                }, 2000);
            },
            function(p1,p2,callback){

                console.log(p1);
                console.log(p2);

                setTimeout(function(){
                    callback(null, 'two');
                }, 1000);
            },
            function(p1,callback){

                console.log(p1);

                setTimeout(function(){
                    callback(null, 'done');
                }, 1000);
            }
        ],
// optional callback
                function(err, results){
                    // the results array will equal ['one','two'] even though
                    // the second function had a shorter timeout.

                    console.log(results);
                }
        );


    </script>

</head>
<body>

</body>
</html>