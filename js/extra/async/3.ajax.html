<!DOCTYPE html>
<html>
<head>
    <title></title>

    <script src="../libs/async.js"></script>

    <script src="http://code.jquery.com/jquery-latest.js"></script>


    <script>

        $(function() {

            $('#get-btn').on('click', function() {

                //$.mobile.showPageLoadingMsg();

                var url = 'http://api.flickr.com/services/feeds/photos_public.gne';

                async.series(
                        [

                    function(callback){
                        console.log('gun..begin..');

                        $.ajax({
                            url: url,
                            type: 'GET',
                            data: {
                                tags: 'gun',
                                tagmode: 'any',
                                format: 'json'
                            },
                            jsonp: 'jsoncallback',
                            jsonpCallback: 'flicker',
                            dataType: 'jsonp',
                            success: function(data, textStatus, jqXHR) {
                                console.log('success : ' + data.title);

                                $.each(data.items, function(index, item) {

                                    console.log(item.media.m);


                                });

                            },
                            error: function(jqXHR,textStatus) {
                                console.log('error ' + textStatus);

                            },
                            complete: function(jqxhr,textstatus) {
                                console.log('complete');
                                console.log('gun..complete');
                                //$.mobile.hidePageLoadingMsg();

                                callback(null, 'step-1');
                            }
                        });

                    },
                    function(callback){
                        console.log('flower begin')
                        $.ajax({
                            url: url,
                            type: 'GET',
                            data: {
                                tags: 'flower',
                                tagmode: 'any',
                                format: 'json'
                            },
                            jsonp: 'jsoncallback',
                            jsonpCallback: 'flicker',
                            dataType: 'jsonp',
                            success: function(data, textStatus, jqXHR) {
                                console.log('success : ' + data.title);

                                $.each(data.items, function(index, item) {
                                    console.log(item.media.m);

                                });

                            },
                            error: function(jqXHR,textStatus) {
                                console.log('error ' + textStatus);

                            },
                            complete: function(jqxhr,textstatus) {
                                console.log('complete');
                                console.log('flower..complete');
                                callback(null, 'step-2');
                            }
                        });
                    }
                ],
                        function(err, results) {
                            // the results array will equal ['one','two'] even though
                            // the second function had a shorter timeout.

                            console.log(results);
                        });

            });


        })


    </script>


</head>
<body>

<button id='get-btn'>get</button>

</body>
</html>