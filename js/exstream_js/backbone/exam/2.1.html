<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>hello-backbonejs</title>
        <script src="../lib/jquery.js"></script>
        <script src="../lib/json2.js"></script>
        <script src="../lib/underscore.js"></script>
        <script src="../lib/backbone.js"></script>

        <script>

        </script>

        <script>
            $(function() {
//모델 정의
                var Item = Backbone.Model.extend({
                    defaults: {
                        img_url: '',
                        text: ''
                    },
                    initialize: function() {
                        console.log(this.get('text'));
                    }
                });

                //콜랙터 정의
                var List = Backbone.Collection.extend({
                    model: Item
                });

//뷰정의
                var ItemView = Backbone.View.extend({
                    tagName: 'li',
                    initialize: function() {
                        _.bindAll(this, 'render');

                    },
                    render: function() {
                        this.$el.html('<a>' + this.model.get('text') + '</a>');
                        return this;
                    }

                });

                var ListView = Backbone.View.extend({
                    el: $('body'),
                    initialize: function(param) {
                        _.bindAll(this, 'render');
                        this.collection = new List(
                                param.listdata
                                );
                        this.render();

                    },
                    render: function() {

                        $(this.el).append("<ul></ul>");

                        var self = this;
                        _(this.collection.models).each(function(item) {
                            var itemview = new ItemView({
                                model: item
                            });
                            $('ul', self.el).append(itemview.render().el);

                        });

                    }

                });

                var listView = new ListView({listdata: [
                        {img_url: "http://ukga.web-bi.net/img/vyb9.jpeg", text: "희망이 죽었네..."},
                        {img_url: "http://ukga.web-bi.net/img/gk.png", text: "주인조차 못푸는..."},
                        {img_url: "http://ukga.web-bi.net/img/zao5.jpeg", text: "미국은 머든지 크죠..."}
                    ]});


            });
        </script>
    </head>
    <body>

    </body>
</html>
