<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>Demo</title>

    <link rel="stylesheet" href="lib/jquery.mobile-1.3.1.min.css"/>
    <link rel="stylesheet" href="lib/jquery.mobile.iscrollview.css"/>
    <link rel="stylesheet" href="lib/jquery.mobile.iscrollview-pull.css"/>

    <!--<link rel="stylesheet" href="./lib/additional-site-specific-styles.css"/>-->

    <script src="lib/jquery-2.0.3.min.js"></script>

    <script>
        $(document).on('mobileinit',function(evt) {
            var strTokens = location.href.split('#');
            if(strTokens.length >= 2) {
                location.href = strTokens[0];
                return false;
            }
            $.mobile.autoInitializePage = false;

        });
    </script>

    <script src="lib/jquery.mobile-1.3.1.min.js"></script>
    <script src="lib/iscroll.js"></script>
    <script src="lib/jquery.mobile.iscrollview.js"></script>

    <script>

        $(function() {

            //페이지 이벤트관련 핸들러 바인딩은 여기서해준다...

            $('.index-page').on('pageshow',function(evt) {
                console.log(evt.target.id);

                var req_tag = 'all';
                switch(evt.target.id) {
                    case 'page-gun':
                        req_tag = 'gun';
                        break;
                    case 'page-knife':
                        req_tag = 'knife';
                        break;
                    case 'page-axe':
                        req_tag = 'axe';
                        break;
                }

                $.mobile.showPageLoadingMsg();


                var list_view = $(':jqmData(role="content") :jqmData(role="listview")',this);

                $.ajax({
                    url: 'http://api.flickr.com/services/feeds/photos_public.gne',
                    type: 'GET',
                    data: {
                        tags: req_tag,
                        tagmode: 'any',
                        format: 'json'
                    },
                    jsonp: 'jsoncallback',
                    jsonpCallback: 'flicker',
                    dataType: 'jsonp',
                    success: function(data, textStatus, jqXHR) {

                        $.each(data.items, function(index, item) {

                            console.log(item);

                            $('<img/>').attr('src', item.media.m)
                                    .appendTo($('<a></a>').text(item.title)
                                            .appendTo($('<li></li>').appendTo(list_view)
                                    ));

                            $(list_view).listview("refresh");


                        });
                    },
                    error: function(jqXHR,textStatus) {
                        console.log('error ' + textStatus);

                    },
                    complete: function() {
                        console.log('complete');
                        $.mobile.hidePageLoadingMsg();
                    }
                });

            });

            $('.index-page').on('pagehide',function(evt) {

                var list_view = $(':jqmData(role="content") :jqmData(role="listview")',this);
                $(list_view).empty();

            });


            $.mobile.initializePage();

            //페이지 초기화 관련 코드는 여기아래부터 작성한다...

            //도큐먼트 이벤트 관련 핸들러 바인딩은 여기서 부터한다.
        });

    </script>



    <!--<script src="additional-site-specific-scripts.js"></script>-->

</head>

<body>


<!--총이미지-->
<div data-role="page" class="index-page" id='page-gun'>

    <div data-role="header" data-position="fixed" data-tap-toggle="false" data-transition="none" data-id="header">
        <h1>Gun</h1>
    </div>

    <div data-role="content" class="example-wrapper" data-iscroll>

        <ul data-role="listview">

        </ul>

    </div>

    <div data-role="footer" data-position="fixed" data-tap-toggle="false" data-transition="none" data-id="footer">
        <div data-role='navbar'>
            <ul>
                <li><a class="ui-btn-active ui-state-persist" >Gun</a></li>
                <li><a href="#page-knife">Knife</a></li>
                <li><a href="#page-axe">axe</a></li>

            </ul>
        </div>
    </div>

</div>

<!--단검 이미지-->
<div data-role="page" class="index-page" id='page-knife'>

    <div data-role="header" data-position="fixed" data-tap-toggle="false" data-transition="none" data-id="header">
        <h1>Knife</h1>
    </div>

    <div data-role="content" class="example-wrapper" data-iscroll>

        <ul data-role="listview">

        </ul>

    </div>

    <div data-role="footer" data-position="fixed" data-tap-toggle="false" data-transition="none" data-id="footer">
        <div data-role='navbar'>
            <ul>
                <li><a href="#page-gun"  >Gun</a></li>
                <li><a class="ui-btn-active ui-state-persist">Knife</a></li>
                <li><a href="#page-axe">axe</a></li>

            </ul>
        </div>
    </div>

</div>

<!--도끼 이미지-->
<div data-role="page" class="index-page" id='page-axe'>

    <div data-role="header" data-position="fixed" data-tap-toggle="false" data-transition="none" data-id="header">
        <h1>Axe</h1>
    </div>

    <div data-role="content" class="example-wrapper" data-iscroll>

        <ul data-role="listview">

        </ul>

    </div>

    <div data-role="footer" data-position="fixed" data-tap-toggle="false" data-transition="none" data-id="footer">
        <div data-role='navbar'>
            <ul>
                <li><a href="#page-gun"  >Gun</a></li>
                <li><a href="#page-knife">Knife</a></li>
                <li><a class="ui-btn-active ui-state-persist">axe</a></li>

            </ul>
        </div>
    </div>

</div>


</body>
</html>